language: python

matrix:
  include:
    - name: 2.7_bionic
      python: 2.7
      dist: bionic

    - name: 3.6_bionic
      python: 3.6
      dist: bionic

    - name: 3.7_bionic
      python: 3.7
      dist: bionic

    - name: 3.8_bionic
      python: 3.8
      dist: bionic

addons:
  apt:
    packages:
      - xvfb
      - xserver-xephyr
      - scrot
      - povray
      - povray-includes

before_install:
  - sudo dpkg --add-architecture i386
  - wget -O eagle.deb 'http://archive.ubuntu.com/ubuntu/pool/multiverse/e/eagle/eagle_6.6.0-2_i386.deb'
  - sudo dpkg -i eagle.deb || true
  - sudo apt --fix-broken -y install
  # - sudo apt-get install -y eagle:i386

install:
  - pip install -r requirements-test.txt
  - pip install --upgrade .

script:
  - cd tests
  - pytest -v .

